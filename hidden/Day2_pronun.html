<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Flashcard Program</title>
  <link rel="stylesheet" href="flash-style.css" />
</head>

<body>
<div id="container">
  <div id="flashcard">
    <h1 id="word" style="font-size: 100px;">Word goes here</h1>
    <h1 id="definition" style="font-size: 30px;">Definition goes here</h1>
  </div>
  <div id="button-container">
    <button class="button" id="left-button">Translate</button>
    <button class="button" id="right-button">I got it right</button>
    <button class="button" id="next-button">Next words</button>
    <input type="number" class="set-num" id="set-num" min="1" max="1000">
  </div>

</div>

  <script>
    const lessonWords = [
    {word: "爱", definition: "ai4", score: 0},
{word: "爸", definition: "ba4", score: 0},
{word: "吧", definition: "ba", score: 0},
{word: "百", definition: "bai3", score: 0},
{word: "班", definition: "ban1", score: 0},
{word: "半", definition: "ban4", score: 0},
{word: "帮", definition: "bang1", score: 0},
{word: "忙", definition: "mang2", score: 0},
{word: "包", definition: "bao1", score: 0},
{word: "杯", definition: "bei1", score: 0},
{word: "北", definition: "bei3", score: 0},
{word: "京", definition: "jing1", score: 0},
{word: "别", definition: "bie2", score: 0},
{word: "病", definition: "bing4", score: 0},
{word: "客", definition: "ke4", score: 0},
{word: "气", definition: "qi4", score: 0},
{word: "用", definition: "yong4", score: 0},
{word: "菜", definition: "cai4", score: 0},
{word: "茶", definition: "cha2", score: 0},
{word: "差", definition: "cha4", score: 0},
{word: "唱", definition: "chang4", score: 0},
{word: "歌", definition: "ge1", score: 0},
{word: "票", definition: "piao4", score: 0},
{word: "站", definition: "zhan4", score: 0},
{word: "吃", definition: "chi1", score: 0},
{word: "饭", definition: "fan4", score: 0},
{word: "穿", definition: "chuan1", score: 0},
{word: "床", definition: "chuang2", score: 0},
{word: "次", definition: "ci4", score: 0},
{word: "错", definition: "cuo4", score: 0},
{word: "打", definition: "da3", score: 0},
{word: "电", definition: "dian4", score: 0},
{word: "话", definition: "hua4", score: 0},
{word: "球", definition: "qiu2", score: 0},
{word: "得", definition: "de2", score: 0},
{word: "等", definition: "deng3", score: 0},
{word: "方", definition: "fang1", score: 0},
{word: "图", definition: "tu2", score: 0},
{word: "弟", definition: "di4", score: 0},
{word: "第", definition: "di4", score: 0},
{word: "脑", definition: "nao3", score: 0},
{word: "视", definition: "shi4", score: 0},
{word: "机", definition: "ji1", score: 0},
{word: "影", definition: "ying3", score: 0},
{word: "院", definition: "yuan4", score: 0},
{word: "作", definition: "zuo4", score: 0},
{word: "读", definition: "du2", score: 0},
{word: "饿", definition: "e4", score: 0},
{word: "房", definition: "fang2", score: 0},
{word: "间", definition: "jian1", score: 0},
{word: "放", definition: "fang4", score: 0},
{word: "假", definition: "jia3", score: 0},
{word: "非", definition: "fei1", score: 0},
{word: "风", definition: "feng1", score: 0},
{word: "干", definition: "gan4", score: 0},
{word: "净", definition: "jing4", score: 0},
{word: "兴", definition: "xing4", score: 0},
{word: "告", definition: "gao4", score: 0},
{word: "诉", definition: "su4", score: 0},
{word: "给", definition: "gei3", score: 0},
{word: "关", definition: "guan1", score: 0},
{word: "贵", definition: "gui4", score: 0},
{word: "孩", definition: "hai2", score: 0},
{word: "汉", definition: "han4", score: 0},
{word: "语", definition: "yu3", score: 0},
{word: "玩", definition: "wan2", score: 0},
{word: "号", definition: "hao4", score: 0},
{word: "喝", definition: "he1", score: 0},
{word: "花", definition: "hua1", score: 0},
{word: "坏", definition: "huai4", score: 0},
{word: "回", definition: "hui2", score: 0},
{word: "答", definition: "da2", score: 0},
{word: "火", definition: "huo3", score: 0},
{word: "场", definition: "chang3", score: 0},
{word: "鸡", definition: "ji1", score: 0},
{word: "蛋", definition: "dan4", score: 0},
{word: "住", definition: "zhu4", score: 0},
{word: "教", definition: "jiao4", score: 0},
{word: "楼", definition: "lou2", score: 0},
{word: "姐", definition: "jie3", score: 0},
{word: "绍", definition: "shao4", score: 0},
{word: "今", definition: "jin1", score: 0},
{word: "进", definition: "jin4", score: 0},
{word: "觉", definition: "jue2", score: 0},
{word: "笑", definition: "xiao4", score: 0},
{word: "考", definition: "kao3", score: 0},
{word: "试", definition: "shi4", score: 0},
{word: "渴", definition: "ke3", score: 0},
{word: "课", definition: "ke4", score: 0},
{word: "块", definition: "kuai4", score: 0},
{word: "快", definition: "kuai4", score: 0},
{word: "师", definition: "shi1", score: 0},
{word: "累", definition: "lei4", score: 0},
{word: "冷", definition: "leng3", score: 0},
{word: "零", definition: "ling2", score: 0},
{word: "路", definition: "lu4", score: 0},
{word: "马", definition: "ma3", score: 0},
{word: "买", definition: "mai3", score: 0},
{word: "慢", definition: "man4", score: 0},
{word: "毛", definition: "mao2", score: 0},
{word: "系", definition: "xi4", score: 0},
{word: "妹", definition: "mei4", score: 0},
{word: "朋", definition: "peng2", score: 0},
{word: "友", definition: "you3", score: 0},
{word: "米", definition: "mi3", score: 0},
{word: "条", definition: "tiao2", score: 0},
{word: "明", definition: "ming2", score: 0},
{word: "拿", definition: "na2", score: 0},
{word: "哪", definition: "na3", score: 0},
{word: "些", definition: "xie1", score: 0},
{word: "南", definition: "nan2", score: 0},
{word: "难", definition: "nan2", score: 0},
{word: "您", definition: "nin2", score: 0},
{word: "牛", definition: "niu2", score: 0},
{word: "旁", definition: "pang2", score: 0},
{word: "跑", definition: "pao3", score: 0},
{word: "汽", definition: "qi4", score: 0},
{word: "钱", definition: "qian2", score: 0},
{word: "请", definition: "qing3", score: 0},
{word: "问", definition: "wen4", score: 0},
{word: "坐", definition: "zuo4", score: 0},
{word: "热", definition: "re4", score: 0},
{word: "识", definition: "shi2", score: 0},
{word: "真", definition: "zhen1", score: 0},
{word: "期", definition: "qi1", score: 0},
{word: "肉", definition: "rou4", score: 0},
{word: "商", definition: "shang1", score: 0},
{word: "午", definition: "wu3", score: 0},
{word: "身", definition: "shen1", score: 0},
{word: "候", definition: "hou4", score: 0},
{word: "树", definition: "shu4", score: 0},
{word: "果", definition: "guo3", score: 0},
{word: "睡", definition: "shui4", score: 0},
{word: "送", definition: "song4", score: 0},
{word: "太", definition: "tai4", score: 0},
{word: "写", definition: "xie3", score: 0},
{word: "馆", definition: "guan3", score: 0},
{word: "晚", definition: "wan3", score: 0},
{word: "忘", definition: "wang4", score: 0},
{word: "洗", definition: "xi3", score: 0},
{word: "喜", definition: "xi3", score: 0},
{word: "欢", definition: "huan1", score: 0},
{word: "雨", definition: "yu3", score: 0},
{word: "先", definition: "xian1", score: 0},
{word: "想", definition: "xiang3", score: 0},
{word: "谢", definition: "xie4", score: 0},
{word: "新", definition: "xin1", score: 0},
{word: "星", definition: "xing1", score: 0},
{word: "行", definition: "xing2", score: 0},
{word: "休", definition: "xiu1", score: 0},
{word: "息", definition: "xi1", score: 0},
{word: "习", definition: "xi2", score: 0},
{word: "校", definition: "xiao4", score: 0},
{word: "爷", definition: "ye2", score: 0},
{word: "页", definition: "ye4", score: 0},
{word: "衣", definition: "yi1", score: 0},
{word: "服", definition: "fu2", score: 0},
{word: "医", definition: "yi1", score: 0},
{word: "右", definition: "you4", score: 0},
{word: "元", definition: "yuan2", score: 0},
{word: "远", definition: "yuan3", score: 0},
{word: "月", definition: "yue4", score: 0},
{word: "早", definition: "zao3", score: 0},
{word: "找", definition: "zhao3", score: 0},
{word: "正", definition: "zheng4", score: 0},
{word: "知", definition: "zhi1", score: 0},
{word: "道", definition: "dao4", score: 0},
{word: "重", definition: "zhong4", score: 0},
{word: "准", definition: "zhun3", score: 0},
{word: "备", definition: "bei4", score: 0},
{word: "桌", definition: "zhuo1", score: 0},
{word: "走", definition: "zou3", score: 0},
{word: "昨", definition: "zuo2", score: 0},
{word: "左", definition: "zuo3", score: 0},
{word: "做", definition: "zuo4", score: 0}
    ];

    const definition = document.getElementById("definition");
    const word = document.getElementById("word");
    let wordOnDisplay = false;
    let currentWords = lessonWords.slice(0, 7);
    let currentIndex = 0;
    let setNum = 1;
    let setSize = 7;
    let dieRoll = 0;
    let tapCount = 0;
    //let timer;
    let translateButtonTapped = false;
    
    const exclamatories = ["Oops", "I Forgor", "RIP Memory", "Uh-Oh"];
    let currentEx = 0; //Exclamatory at this index will be displayed next.
    init();
    
    function init() {
        // Display the first word and definition
        word.innerHTML = currentWords[0].word;
        definition.innerHTML = currentWords[0].definition;
        displaySetNum();
        // Event listeners for the buttons
        document.getElementById("left-button").addEventListener("touchstart", function () {
            if (translateButtonTapped === false) {
                translateButtonTapped = true;
            } else {
                translateButtonTapped = false;
            }
        });
        document.getElementById("left-button").addEventListener("click", function () {
            this.blur();
    
            if (wordOnDisplay === true) {
                // Move the current word back in the queue by 3 positions
                // or to the back if there are less than 4 words in the queue
                let currentWord = currentWords.shift();
                if (currentWords.length < 4) {
                    currentWords.push(currentWord); //put it at the very end
                    console.log(currentWords);
                } else {
                    currentWords.splice(3, 0, currentWord);
                    console.log(currentWords);
                }
                currentWord.score = -1;
                definition.style.visibility = "hidden";
                definition.style.textTransform = "lowercase";
    
                displayDone();
                displayNextWord();
                document.getElementById("left-button").innerHTML = "Translate";
                wordOnDisplay = false;
            } else {
                wordOnDisplay = true;
                definition.style.visibility = "visible";
                dieRoll = getRandomNumber();
                //If dieRoll < 98, display "Again" instead of an exclamatory remark
    
                if (dieRoll < 98) {
                    document.getElementById("left-button").innerHTML = "Again";
                } else {
                    if (currentEx > 3) {
                        currentEx = 0;
                    }
                    document.getElementById("left-button").innerHTML = exclamatories[currentEx];
                    currentEx += 1;
                }
            }
        });
    
        document.getElementById("right-button").addEventListener("click", function () {
            this.blur();
            // Move the current word to the back of the queue
            let currentWord = currentWords.shift();
            currentWords.push(currentWord);
            currentWord.score++;
            // If the word's score is 2, remove it from the queue
            if (currentWord.score === 2) {
                currentWords = currentWords.filter((word) => word !== currentWord);
            }
            definition.style.visibility = "hidden";
            definition.style.textTransform = "lowercase";
            document.getElementById("left-button").innerHTML = "Translate";
            displayDone();
            displayNextWord();
            wordOnDisplay = false;
        });
    
        document.getElementById("next-button").addEventListener("click", function () {
            this.blur();
            // Load the next setSize words from the lessonWords array
            currentIndex += setSize;
            currentWords = lessonWords.slice(currentIndex, currentIndex + setSize);
            definition.style.visibility = "hidden";
            definition.style.textTransform = "lowercase";
    
            setNum += 1;
    
            displaySetNum();
    
            displayDone();
            displayNextWord();
            wordOnDisplay = false;
        });
    
        document.addEventListener("keydown", (event) => {
            // Check if the key that was pressed is the space key
            if (event.key === " ") {
                const numInput = document.getElementById("set-num");
                numInput.value = numInput.value.replaceAll(" ", "");
                if (wordOnDisplay === false) {
                    displayDone();
                    definition.style.visibility = "visible";
                    wordOnDisplay = true;
                    dieRoll = getRandomNumber();
                    //If dieRoll < 98, display "Again" instead of an exclamatory remark
                    if (dieRoll < 98) {
                        document.getElementById("left-button").innerHTML = "Again";
                    } else {
                        if (currentEx > 3) {
                            currentEx = 0;
                        }
                        document.getElementById("left-button").innerHTML = exclamatories[currentEx];
                        currentEx += 1;
                    }
                } else {
                    let currentWord = currentWords.shift();
                    currentWords.push(currentWord);
                    currentWord.score++;
                    // If the word's score is 2, remove it from the queue
                    if (currentWord.score === 2) {
                        currentWords = currentWords.filter((word) => word !== currentWord);
                    }
                    definition.style.visibility = "hidden";
                    definition.style.textTransform = "lowercase";
                    document.getElementById("left-button").innerHTML = "Translate";
                    displayDone();
                    displayNextWord();
                    wordOnDisplay = false;
                }
            }
            if (event.key === "Enter") {
                const numInput = document.getElementById("set-num");
                numInput.blur();
                displaySet();
            }
        });
        document.addEventListener("keydown", (event) => {
            // Check if the key that was pressed is the space key
            if (event.key !== "1") return;
    
            let currentWord = currentWords.shift();
            if (currentWords.length < 4) {
                currentWords.push(currentWord);
                console.log(currentWords);
            } else {
                currentWords.splice(3, 0, currentWord);
                console.log(currentWords);
            }
            currentWord.score = -1;
            definition.style.visibility = "hidden";
            definition.style.textTransform = "lowercase";
    
            displayDone();
            displayNextWord();
            wordOnDisplay = false;
        });
    
        document.addEventListener("touchend", (event) => {
            displayDone();
            if (translateButtonTapped === true) {
                translateButtonTapped = false;
                return;
            }
            if (wordOnDisplay === false) {
                displayDone();
                definition.style.visibility = "visible";
                wordOnDisplay = true;
                dieRoll = getRandomNumber();
                //If dieRoll < 98, display "Again" instead of an exclamatory remark
                if (dieRoll < 98) {
                    document.getElementById("left-button").innerHTML = "Again";
                } else {
                    if (currentEx > 3) {
                        currentEx = 0;
                    }
                    document.getElementById("left-button").innerHTML = exclamatories[currentEx];
                    currentEx += 1;
                }
            }
        });
    
        document.addEventListener("touchstart", (event) => {
            tapCount++; // increment the tapCount variable when a tap is detected
        });
    }
    function displaySet() {
        const numInput = document.getElementById("set-num");
        setNum = parseInt(numInput.value);
        currentIndex = setNum * setSize - setSize;
    
        currentWords = lessonWords.slice(currentIndex, currentIndex + setSize);
        definition.style.visibility = "hidden";
        definition.style.textTransform = "lowercase";
    
        displaySetNum();
    
        displayDone();
        displayNextWord();
    }
    
    function displaySetNum() {
        //Find input box
        const numInput = document.getElementById("set-num");
        numInput.value = setNum;
    }
    
    function displayNextWord() {
        // Display the next word and definition
        let currentWord = currentWords[0];
        document.getElementById("word").innerHTML = currentWord.word;
        definition.innerHTML = currentWord.definition;
    }
    
    function displayDone() {
        if (currentWords.length !== 0) return;
        const definition = document.getElementById("definition");
        definition.style.visibility = "visible";
        definition.innerHTML = "Set Done " + setNum;
        definition.style.textTransform = "capitalize";
    }
    
    function getRandomNumber() {
        return Math.floor(Math.random() * 100) + 1;
    }
  </script>
</body>
</html>

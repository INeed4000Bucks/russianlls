<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Flashcard Program</title>
  <link rel="stylesheet" href="flash-style.css" />
</head>

<body>
<div id="container">
  <div id="flashcard">
    <h1 id="word" style="font-size: 70px; font-family: 'PingFang SC'">Word goes here</h1>
    <h1 id="definition">Definition goes here</h1>
  </div>
  <div id="button-container">
    <button class="button" id="left-button">Translate</button>
    <button class="button" id="right-button">I got it right</button>
    <button class="button" id="next-button">Next words</button>
    <input type="number" class="set-num" id="set-num" min="1" max="1000">
  </div>

</div>

<script>
  const lessonWords = [
    {word: "سرباز رومی", definition: "Roman soldier", score: 0},
{word: "آسمان تغییر رنگ می دهد", definition: "The sky changes color", score: 0},
{word: "بهشت واقعی نیست", definition: "Heaven isn't real", score: 0},
{word: "به روزرسانی سیستم", definition: "System update", score: 0},
{word: "هوای قابل تنفس", definition: "Breathable air", score: 0},
{word: "فضای عشق", definition: "atmosphere of love", score: 0},
{word: "حجاب برای زنان", definition: "veil for women", score: 0},
{word: "تعطیلات در برزیل", definition: "A vacation in Brazil", score: 0},
{word: "من از بچه ها محافظت می کنم", definition: "I protext the children", score: 0},
{word: "برادر محافظ", definition: "Protective brother", score: 0},
{word: "برخی از غذاها مسطح هستند", definition: "Some foods are flat", score: 0},
{word: "آپارتمان بلند", definition: "High-rise apartment", score: 0},
{word: "تنهایی عمومی", definition: "general loneliness", score: 0},
{word: "توالت کثیف", definition: "Dirty toilet", score: 0},
{word: "خون قرمز", definition: "Red blood", score: 0},
{word: "قدم های بزرگ", definition: "Big steps", score: 0},
{word: "سرعت سریع", definition: "quick pace", score: 0},
{word: "مالک ثروتمند", definition: "wealthy owner", score: 0},
{word: "صاحِبخانه سختگیر", definition: "strict landlord", score: 0},
{word: "دفتر رئیس", definition: "The boss's office", score: 0},
{word: "قوی ترین مرد", definition: "The strongest man", score: 0},
{word: "میزبان مهمانی", definition: "host of the party", score: 0},
{word: "شما فقط توجه می خواهید", definition: "You just want attention", score: 0},
{word: "مدرسه غیر ضروری", definition: "Unnecessary school", score: 0},
{word: "آکادمی جادوگران", definition: "academy for wizards", score: 0},
{word: "مطالعات دانشگاهی", definition: "university studies", score: 0},
{word: "کار روزانه", definition: "Daily work", score: 0},
{word: "سطح دُشواری بالا", definition: "High level of difficulty", score: 0},
{word: "کاپیتان باتَجرُبِه", definition: "Experienced captain", score: 0},
{word: "پیراهن پسر", definition: "The boy's shirt", score: 0},
{word: "من با یک پسر دوست هستم", definition: "I'm friends with a guy", score: 0},
{word: "دوست پسر ضعیف", definition: "Weak boyfriend", score: 0},
{word: "به عنوان یک گروه، ما قوی هستیم", definition: "As a group, we are strong", score: 0},
{word: "ساختمان مَتروکِه", definition: "Abandoned building", score: 0},
{word: "آفتاب داغ است", definition: "The sun is hot", score: 0},
{word: "عشق به شکار", definition: "A love of hunting", score: 0},
{word: "علاقه به بچه حیوانات", definition: "affection for baby animals", score: 0},
{word: "گوش در کنار سر", definition: "Ear on the side of the head", score: 0},
{word: "یک هفته بدون قانون", definition: "A week of no rules", score: 0},
{word: "پاسخ ساده شده", definition: "Simplified answer", score: 0},
{word: "ساحل شنی", definition: "Sandy shore", score: 0},
{word: "سرزمین خشک", definition: "Dry land", score: 0},
    {word: "sottile", definition: "thin", score: 0},
{word: "la casa", definition: "house", score: 0},
{word: "la camera da letto", definition: "bedroom", score: 0},
{word: "la cucina", definition: "kitchen", score: 0},
{word: "il bagno", definition: "bathroom", score: 0},
{word: "la porta", definition: "door", score: 0},
{word: "la finestra", definition: "window", score: 0},
{word: "la scala", definition: "stairs", score: 0},
{word: "il soffitto", definition: "ceiling", score: 0},
{word: "il tetto", definition: "roof", score: 0},
{word: "il letto", definition: "bed", score: 0},
{word: "il orologio", definition: "clock", score: 0},
{word: "il cuscino", definition: "pillow", score: 0},
{word: "la coperta", definition: "blanket", score: 0},
{word: "il sapone", definition: "soap", score: 0},
{word: "lo specchio", definition: "mirror", score: 0},
{word: "l’asciugamano", definition: "towel", score: 0},
{word: "la scopa", definition: "broom", score: 0},
{word: "il ferro da stiro", definition: "iron", score: 0},
{word: "il frigo", definition: "fridge", score: 0},
{word: "la lavatrice", definition: "washing machine", score: 0},
{word: "attuale", definition: "current", score: 0},
{word: "povero", definition: "poor", score: 0},
{word: "lungo", definition: "long", score: 0},
{word: "certo", definition: "sure, certain", score: 0},
{word: "maggiore", definition: "greater", score: 0},
{word: "bello", definition: "beautiful", score: 0},
{word: "stesso", definition: "same", score: 0},
{word: "vecchio", definition: "old", score: 0},
{word: "grigio", definition: "gray", score: 0},
{word: "ampio", definition: "wide", score: 0},
{word: "religioso", definition: "religious", score: 0},
{word: "stupido", definition: "stupido", score: 0},
{word: "sereno", definition: "serene/sunny", score: 0},
{word: "nero", definition: "black", score: 0},
{word: "soffrire", definition: "to suffer", score: 0},
{word: "soffocare", definition: "to suffocate", score: 0},
{word: "paese", definition: "country or town", score: 0},
{word: "domani", definition: "tomorrow", score: 0},
{word: "mondo", definition: "world", score: 0},
{word: "città", definition: "city", score: 0},
{word: "strada", definition: "road", score: 0},
{word: "piazza", definition: "square", score: 0},
{word: "sala", definition: "room", score: 0},
{word: "ufficio", definition: "office", score: 0},
{word: "oggi", definition: "today", score: 0},
{word: "zona", definition: "zone", score: 0},
{word: "isola", definition: "island", score: 0},
{word: "anno", definition: "year", score: 0},
{word: "giorno", definition: "day", score: 0},
{word: "volta", definition: "time (countable)", score: 0},
{word: "ora", definition: "hour", score: 0},
{word: "momento", definition: "moment", score: 0},
{word: "notte", definition: "night", score: 0},
{word: "sera", definition: "evening", score: 0},
{word: "mese", definition: "month", score: 0},
{word: "periodo", definition: "period or “interval", score: 0},
{word: "ieri", definition: "yesterday", score: 0},
{word: "minuto", definition: "minute", score: 0},
{word: "uomo", definition: "man", score: 0},
{word: "donna", definition: "woman", score: 0},
{word: "signore/a", definition: "sir/madam", score: 0},
{word: "padre", definition: "father", score: 0},
{word: "figlio/a", definition: "son/daughter", score: 0},
{word: "persona", definition: "person", score: 0},
{word: "amico/a", definition: "friend", score: 0},
{word: "famiglia", definition: "family", score: 0},
{word: "nemico/a", definition: "enemy", score: 0},
{word: "sorella", definition: "sister", score: 0},
{word: "acqua", definition: "water", score: 0},
{word: "aria", definition: "air", score: 0},
{word: "mare", definition: "sea", score: 0},
{word: "luce", definition: "light", score: 0},
{word: "sole", definition: "sun", score: 0},
{word: "albero", definition: "tree", score: 0},
{word: "fiore", definition: "flower", score: 0},
{word: "natura", definition: "nature", score: 0},
{word: "fuoco", definition: "fire", score: 0},
{word: "campagna", definition: "(the) country", score: 0},
    {word: "tacchi a spillo", definition: "high heels", score: 0},
    {word: "stretto", definition: "tight", score: 0},
    {word: "trucco", definition: "makeup (cosmetics)", score: 0},
{word: "gamba", definition: "leg", score: 0},
{word: "bocca", definition: "mouth", score: 0},
{word: "braccio", definition: "arm", score: 0},
    {word: "sicuramente", definition: "surely", score: 0},
{word: "pazzesco/a", definition: "crazy", score: 0},
{word: "vedere", definition: "to see", score: 0},
{word: "uscire", definition: "to come out", score: 0},
{word: "su", definition: "on", score: 0},
{word: "esca", definition: "would come out", score: 0},
{word: "grande", definition: "big", score: 0},
{word: "nuovo/a", definition: "new", score: 0},
{word: "certo/a", definition: "sure/certain", score: 0},
{word: "vero/a", definition: "TRUE", score: 0},
{word: "buono/a", definition: "good", score: 0},
{word: "piccolo/a", definition: "small", score: 0},
{word: "giovane", definition: "young", score: 0},
{word: "alto/a", definition: "tall", score: 0},
{word: "diverso/a", definition: "different", score: 0},
{word: "possibile", definition: "possible", score: 0},
{word: "caro/a", definition: "expensive/dear", score: 0},
{word: "pieno/a", definition: "full", score: 0},
{word: "particolare", definition: "specific/unique", score: 0},
{word: "bianco/a", definition: "white", score: 0},
{word: "latino/a", definition: "Latin", score: 0},
{word: "impossibile", definition: "impossible", score: 0},
{word: "puro/a", definition: "pure", score: 0},
{word: "normale", definition: "normal", score: 0},
{word: "perfetto/a", definition: "perfect", score: 0},
{word: "caratteristico/a", definition: "characteristic", score: 0},
{word: "russo/a", definition: "Russian", score: 0},
{word: "continuo/a", definition: "continuous", score: 0},
{word: "stupido/a", definition: "stupid", score: 0},
{word: "estremo/a", definition: "extreme", score: 0},
{word: "reale", definition: "real", score: 0},
{word: "interessante", definition: "interesting", score: 0},
{word: "medesimo/a", definition: "same", score: 0},
{word: "biondo/a", definition: "blonde", score: 0},
{word: "ufficiale", definition: "official", score: 0},
{word: "attento", definition: "attentive/alert", score: 0},
    {word: "timore", definition: "fear", score: 0},
{word: "esitazione", definition: "hesitation", score: 0},
{word: "cautela", definition: "caution", score: 0},
{word: "senza", definition: "without", score: 0},
{word: "pentimento", definition: "regret/repentance", score: 0}
];

const definition = document.getElementById("definition");
const word = document.getElementById("word");
let wordOnDisplay = false;
let currentWords = lessonWords.slice(0, 7);
let currentIndex = 0;
let setNum = 1;
let setSize = 7;
let dieRoll = 0;
let tapCount = 0;
//let timer;
let translateButtonTapped = false;

const exclamatories = ["Oops", "I Forgor", "RIP Memory", "Uh-Oh"];
let currentEx = 0; //Exclamatory at this index will be displayed next.
init();

function init() {
    // Display the first word and definition
    word.innerHTML = currentWords[0].word;
    definition.innerHTML = currentWords[0].definition;
    displaySetNum();
    // Event listeners for the buttons
    document.getElementById("left-button").addEventListener("touchstart", function () {
        if (translateButtonTapped === false) {
            translateButtonTapped = true;
        } else {
            translateButtonTapped = false;
        }
    });
    document.getElementById("left-button").addEventListener("click", function () {
        this.blur();

        if (wordOnDisplay === true) {
            // Move the current word back in the queue by 3 positions
            // or to the back if there are less than 4 words in the queue
            let currentWord = currentWords.shift();
            if (currentWords.length < 4) {
                currentWords.push(currentWord); //put it at the very end
                console.log(currentWords);
            } else {
                currentWords.splice(3, 0, currentWord);
                console.log(currentWords);
            }
            currentWord.score = -1;
            definition.style.visibility = "hidden";
            definition.style.textTransform = "lowercase";

            displayDone();
            displayNextWord();
            document.getElementById("left-button").innerHTML = "Translate";
            wordOnDisplay = false;
        } else {
            wordOnDisplay = true;
            definition.style.visibility = "visible";
            dieRoll = getRandomNumber();
            //If dieRoll < 98, display "Again" instead of an exclamatory remark

            if (dieRoll < 98) {
                document.getElementById("left-button").innerHTML = "Again";
            } else {
                if (currentEx > 3) {
                    currentEx = 0;
                }
                document.getElementById("left-button").innerHTML = exclamatories[currentEx];
                currentEx += 1;
            }
        }
    });

    document.getElementById("right-button").addEventListener("click", function () {
        this.blur();
        // Move the current word to the back of the queue
        let currentWord = currentWords.shift();
        currentWords.push(currentWord);
        currentWord.score++;
        // If the word's score is 2, remove it from the queue
        if (currentWord.score === 2) {
            currentWords = currentWords.filter((word) => word !== currentWord);
        }
        definition.style.visibility = "hidden";
        definition.style.textTransform = "lowercase";
        document.getElementById("left-button").innerHTML = "Translate";
        displayDone();
        displayNextWord();
        wordOnDisplay = false;
    });

    document.getElementById("next-button").addEventListener("click", function () {
        this.blur();
        // Load the next setSize words from the lessonWords array
        currentIndex += setSize;
        currentWords = lessonWords.slice(currentIndex, currentIndex + setSize);
        definition.style.visibility = "hidden";
        definition.style.textTransform = "lowercase";

        setNum += 1;

        displaySetNum();

        displayDone();
        displayNextWord();
        wordOnDisplay = false;
    });

    document.addEventListener("keydown", (event) => {
        // Check if the key that was pressed is the space key
        if (event.key === " ") {
            const numInput = document.getElementById("set-num");
            numInput.value = numInput.value.replaceAll(" ", "");
            if (wordOnDisplay === false) {
                displayDone();
                console.log(currentWords);
                definition.style.visibility = "visible";
                wordOnDisplay = true;
                dieRoll = getRandomNumber();
                //If dieRoll < 98, display "Again" instead of an exclamatory remark
                if (dieRoll < 98) {
                    document.getElementById("left-button").innerHTML = "Again";
                } else {
                    if (currentEx > 3) {
                        currentEx = 0;
                    }
                    document.getElementById("left-button").innerHTML = exclamatories[currentEx];
                    currentEx += 1;
                }
            } else {
                let currentWord = currentWords.shift();
                currentWords.push(currentWord);
                currentWord.score++;
                // If the word's score is 2, remove it from the queue
                if (currentWord.score === 2) {
                    currentWords = currentWords.filter((word) => word !== currentWord);
                }
                definition.style.visibility = "hidden";
                definition.style.textTransform = "lowercase";
                document.getElementById("left-button").innerHTML = "Translate";
                displayDone();
                displayNextWord();
                wordOnDisplay = false;
            }
        }
        if (event.key === "Enter") {
            const numInput = document.getElementById("set-num");
            numInput.blur();
            displaySet();
        }
    });
    document.addEventListener("keydown", (event) => {
        // Check if the key that was pressed is the space key
        if (event.key !== "1") return;

        let currentWord = currentWords.shift();
        if (currentWords.length < 4) {
            currentWords.push(currentWord);
            console.log(currentWords);
        } else {
            currentWords.splice(3, 0, currentWord);
            console.log(currentWords);
        }
        currentWord.score = -1;
        definition.style.visibility = "hidden";
        definition.style.textTransform = "lowercase";

        displayDone();
        displayNextWord();
        wordOnDisplay = false;
    });

    document.addEventListener("touchend", (event) => {
        displayDone();
        if (translateButtonTapped === true) {
            translateButtonTapped = false;
            return;
        }
        if (wordOnDisplay === false) {
            displayDone();
            definition.style.visibility = "visible";
            wordOnDisplay = true;
            dieRoll = getRandomNumber();
            //If dieRoll < 98, display "Again" instead of an exclamatory remark
            if (dieRoll < 98) {
                document.getElementById("left-button").innerHTML = "Again";
            } else {
                if (currentEx > 3) {
                    currentEx = 0;
                }
                document.getElementById("left-button").innerHTML = exclamatories[currentEx];
                currentEx += 1;
            }
        }
    });

    document.addEventListener("touchstart", (event) => {
        tapCount++; // increment the tapCount variable when a tap is detected
    });
}
function displaySet() {
    const numInput = document.getElementById("set-num");
    setNum = parseInt(numInput.value);
    currentIndex = setNum * setSize - setSize;

    currentWords = lessonWords.slice(currentIndex, currentIndex + setSize);
    currentWords.forEach((word) => (word.score = 0));
    definition.style.visibility = "hidden";
    definition.style.textTransform = "lowercase";

    displaySetNum();

    displayDone();
    displayNextWord();
}

function displaySetNum() {
    //Find input box
    const numInput = document.getElementById("set-num");
    numInput.value = setNum;
}

function displayNextWord() {
    // Display the next word and definition
    let currentWord = currentWords[0];
    document.getElementById("word").innerHTML = currentWord.word;
    definition.innerHTML = currentWord.definition;
}

function displayDone() {
    if (currentWords.length !== 0) return;
    const definition = document.getElementById("definition");
    definition.style.visibility = "visible";
    definition.innerHTML = "Set Done " + setNum;
    //definition.style.textTransform = "capitalize";
}

function getRandomNumber() {
    return Math.floor(Math.random() * 100) + 1;
}
  </script>
</body>
</html>
